From 57fd6d2124b0e46a9d3fef71f06c2f4c0fccfe5e Mon Sep 17 00:00:00 2001
From: Pontus Fuchs <pontus.fuchs@gmail.com>
Date: Sun, 2 Sep 2012 15:21:23 +0200
Subject: [PATCH 12/82] Remove debian control files

---
 debian/README.source                               |   58 -----
 debian/changelog                                   |  123 -----------
 debian/compat                                      |    1 -
 debian/control                                     |   21 --
 debian/control.modules.in                          |   22 --
 debian/copyright                                   |   64 ------
 debian/patches/add-Gigaset-108.patch               |   15 --
 debian/patches/add-Globalsun-AR5523.patch          |   20 --
 .../patches/add-support-for-Netgear-WPN111.patch   |   15 --
 debian/patches/clarify-licensing.patch             |   17 --
 debian/patches/declare-firmware.patch              |   15 --
 debian/patches/fix-comment-style.patch             |   43 ----
 debian/patches/kcompat-2.6.25.patch                |   37 ----
 debian/patches/kcompat-2.6.26.patch                |  230 --------------------
 debian/patches/kcompat-2.6.32.patch                |  217 ------------------
 debian/patches/kcompat-2.6.34.patch                |  117 ----------
 debian/patches/kcompat-2.6.35.patch                |   88 --------
 debian/patches/kcompat-3.5.patch                   |   41 ----
 debian/patches/remove-dead-code.patch              |   56 -----
 debian/patches/remove-unused-variables.patch       |   17 --
 debian/patches/series                              |   14 --
 debian/patches/urb_status.patch                    |   70 ------
 debian/rules                                       |   70 ------
 debian/rules.modules                               |   35 ---
 debian/source/format                               |    1 -
 debian/source/local-options                        |    2 -
 debian/source/options                              |    2 -
 27 files changed, 1411 deletions(-)
 delete mode 100644 debian/README.source
 delete mode 100644 debian/changelog
 delete mode 100644 debian/compat
 delete mode 100644 debian/control
 delete mode 100644 debian/control.modules.in
 delete mode 100644 debian/copyright
 delete mode 100644 debian/patches/add-Gigaset-108.patch
 delete mode 100644 debian/patches/add-Globalsun-AR5523.patch
 delete mode 100644 debian/patches/add-support-for-Netgear-WPN111.patch
 delete mode 100644 debian/patches/clarify-licensing.patch
 delete mode 100644 debian/patches/declare-firmware.patch
 delete mode 100644 debian/patches/fix-comment-style.patch
 delete mode 100644 debian/patches/kcompat-2.6.25.patch
 delete mode 100644 debian/patches/kcompat-2.6.26.patch
 delete mode 100644 debian/patches/kcompat-2.6.32.patch
 delete mode 100644 debian/patches/kcompat-2.6.34.patch
 delete mode 100644 debian/patches/kcompat-2.6.35.patch
 delete mode 100644 debian/patches/kcompat-3.5.patch
 delete mode 100644 debian/patches/remove-dead-code.patch
 delete mode 100644 debian/patches/remove-unused-variables.patch
 delete mode 100644 debian/patches/series
 delete mode 100644 debian/patches/urb_status.patch
 delete mode 100755 debian/rules
 delete mode 100644 debian/rules.modules
 delete mode 100644 debian/source/format
 delete mode 100644 debian/source/local-options
 delete mode 100644 debian/source/options

diff --git a/debian/README.source b/debian/README.source
deleted file mode 100644
index 5dde0bf..0000000
--- a/debian/README.source
+++ /dev/null
@@ -1,58 +0,0 @@
-This package uses quilt to manage all modifications to the upstream
-source.  Changes are stored in the source package as diffs in
-debian/patches and applied during the build.
-
-To configure quilt to use debian/patches instead of patches, you want
-either to export QUILT_PATCHES=debian/patches in your environment
-or use this snippet in your ~/.quiltrc:
-
-    for where in ./ ../ ../../ ../../../ ../../../../ ../../../../../; do
-        if [ -e ${where}debian/rules -a -d ${where}debian/patches ]; then
-                export QUILT_PATCHES=debian/patches
-                break
-        fi
-    done
-
-To get the fully patched source after unpacking the source package, cd to
-the root level of the source package and run:
-
-    quilt push -a
-
-The last patch listed in debian/patches/series will become the current
-patch.
-
-To add a new set of changes, first run quilt push -a, and then run:
-
-    quilt new <patch>
-
-where <patch> is a descriptive name for the patch, used as the filename in
-debian/patches.  Then, for every file that will be modified by this patch,
-run:
-
-    quilt add <file>
-
-before editing those files.  You must tell quilt with quilt add what files
-will be part of the patch before making changes or quilt will not work
-properly.  After editing the files, run:
-
-    quilt refresh
-
-to save the results as a patch.
-
-Alternately, if you already have an external patch and you just want to
-add it to the build system, run quilt push -a and then:
-
-    quilt import -P <patch> /path/to/patch
-    quilt push -a
-
-(add -p 0 to quilt import if needed). <patch> as above is the filename to
-use in debian/patches.  The last quilt push -a will apply the patch to
-make sure it works properly.
-
-To remove an existing patch from the list of patches that will be applied,
-run:
-
-    quilt delete <patch>
-
-You may need to run quilt pop -a to unapply patches first before running
-this command.
diff --git a/debian/changelog b/debian/changelog
deleted file mode 100644
index 8ee67f0..0000000
--- a/debian/changelog
+++ /dev/null
@@ -1,123 +0,0 @@
-ar5523 (0~slh.14) UNRELEASED; urgency=low
-
-  * NOT RELEASED YET
-
- -- Stefan Lippers-Hollmann <s.l-h@gmx.de>  Thu, 26 Jul 2012 02:39:06 +0200
-
-ar5523 (0~slh.13) experimental; urgency=low
-
-  * Switch to dpkg-source 3.0 (quilt) format
-  * make lintian happier:
-    - I: ar5523 source: quilt-patch-missing-description
-      add-support-for-Netgear-WPN111.patch
-    - I: ar5523 source: quilt-patch-missing-description declare-firmware.patch
-    - I: ar5523 source: quilt-patch-missing-description kcompat-3.5.patch
-    - W: ar5523 source: debhelper-but-no-misc-depends ar5523-source
-    - W: ar5523 source: debian-rules-missing-recommended-target build-arch
-    - W: ar5523 source: debian-rules-missing-recommended-target build-indep
-    - W: ar5523 source: patch-system-but-no-source-readme
-
- -- Stefan Lippers-Hollmann <s.l-h@gmx.de>  Thu, 26 Jul 2012 02:38:47 +0200
-
-ar5523 (0~slh.12) experimental; urgency=low
-
-  * switch to compat level 9.
-  * bump standards version to 3.9.3, no changes necessary.
-  * add Netgear WPN111 device ID, thanks to Jonathan <xtragb@gmail.com>.
-  * fix FTBS against kernel 3.5 (maybe earlier kernels as well).
-  * declare firmware file.
-
- -- Stefan Lippers-Hollmann <s.l-h@gmx.de>  Thu, 26 Jul 2012 02:17:18 +0200
-
-ar5523 (0~slh.11) experimental; urgency=low
-
-  * bump standards version to 3.9.2, no changes necessary.
-  * update kcompat-2.6.34 to cover usb_buffer_alloc() --> usb_alloc_coherent()
-    and usb_buffer_free() --> usb_free_coherent(), thanks to Paul Fertser.
-  * while it compiles up to 2.6.39 now, it still panics on device probe.
-
- -- Stefan Lippers-Hollmann <s.l-h@gmx.de>  Thu, 02 Jun 2011 16:24:14 +0200
-
-ar5523 (0~sidux.10) experimental; urgency=low
-
-  * switch to compat level 8.
-
- -- Stefan Lippers-Hollmann <s.l-h@gmx.de>  Sun, 08 Aug 2010 03:23:51 +0200
-
-ar5523 (0~sidux.9) experimental; urgency=low
-
-  * bump standards version to 3.9.1, no changes necessary.
-
- -- Stefan Lippers-Hollmann <s.l-h@gmx.de>  Tue, 03 Aug 2010 15:35:44 +0200
-
-ar5523 (0~sidux.8) experimental; urgency=low
-
-  * add compatibility for kernel 2.6.35.
-  * bump standards version to 3.9.0, no changes necessary.
-  * bump debhelper build-depends to 7.
-  * ammend debian/copyright with a copy of the ISC license as used in
-    debian/patches/*.
-
- -- Stefan Lippers-Hollmann <s.l-h@gmx.de>  Thu, 22 Jul 2010 00:38:37 +0200
-
-ar5523 (0~sidux.7) experimental; urgency=low
-
-  * bump standards version to 3.8.4, no changes necessary.
-  * add compatibility for kernel 2.6.34.
-  * switch to dpkg-source 3.0 (native) format.
-
- -- Stefan Lippers-Hollmann <s.l-h@gmx.de>  Wed, 05 May 2010 00:28:57 +0200
-
-ar5523 (0~sidux.6) experimental; urgency=low
-
-  * merge urb status clean up from Riccardo Magliocchetti
-    <riccardo.magliocchetti@gmail.com> into urb_status.patch.
-  * refresh patch series.
-  * remove unused variables.
-  * remove dead code.
-  * fix comment style.
-
- -- Stefan Lippers-Hollmann <s.l-h@gmx.de>  Sun, 06 Dec 2009 16:20:03 +0100
-
-ar5523 (0~sidux.5) experimental; urgency=low
-
-  * add compatibility with kernel 2.6.32.
-  * fix coding style for all patches.
-  * refresh quilt series.
-
- -- Stefan Lippers-Hollmann <s.l-h@gmx.de>  Tue, 01 Dec 2009 06:19:27 +0100
-
-ar5523 (0~sidux.4) experimental; urgency=low
-
-  * import fixes from Antonio Galea <ant9000@netwise.it>:
-    - urb_status
-    - clarify-licensing
-  * add additional Globalsun AR5523 ID.
-
- -- Stefan Lippers-Hollmann <s.l-h@gmx.de>  Sun, 29 Nov 2009 04:04:28 +0100
-
-ar5523 (0~sidux.3) experimental; urgency=low
-
-  * initial work on kcompat-2.6.26.patch.
-    - import fixes from Antonio Galea <ant9000@netwise.it>
-  * add crude dist target.
-  * bump standards version to 3.8.3, no changes necessary.
-  * the USB subsystem is GPL2-only, keep MODULE_LICENSE("GPL") instead of
-    the more correct MODULE_LICENSE("Dual GPL/BSD").
-  * move to a compat level of 7 and an according debhelper version.
-
- -- Stefan Lippers-Hollmann <s.l-h@gmx.de>  Thu, 03 Sep 2009 15:51:46 +0200
-
-ar5523 (0~sidux.2) experimental; urgency=low
-
-  * kcompat-2.6.25.patch.
-  * initial work on kcompat-2.6.26.patch.
-
- -- Stefan Lippers-Hollmann <s.l-h@gmx.de>  Wed, 22 Jul 2009 20:40:21 +0200
-
-ar5523 (0~sidux.1) experimental; urgency=low
-
-  * Initial release.
-  * rewrite Makefile for out-of-tree builds completely.
-
- -- Stefan Lippers-Hollmann <s.l-h@gmx.de>  Wed, 22 Jul 2009 16:08:19 +0200
diff --git a/debian/compat b/debian/compat
deleted file mode 100644
index ec63514..0000000
--- a/debian/compat
+++ /dev/null
@@ -1 +0,0 @@
-9
diff --git a/debian/control b/debian/control
deleted file mode 100644
index a331047..0000000
--- a/debian/control
+++ /dev/null
@@ -1,21 +0,0 @@
-Source: ar5523
-Section: net
-Priority: extra
-Maintainer: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-Build-Depends: debhelper (>= 9.20120115),
- quilt
-Build-Depends-Indep: bzip2
-Standards-Version: 3.9.3
-
-Package: ar5523-source
-Architecture: all
-Depends: ${misc:Depends},
- module-assistant,
- debhelper (>= 9.20120115),
- make,
- bzip2
-Description: Source for the ar5523 driver
- This package provides the source code for the ar5523 driver for
- Atheros wireless USB chipsets.
- .
- Kernel source or headers are required to compile these modules.
diff --git a/debian/control.modules.in b/debian/control.modules.in
deleted file mode 100644
index 605e357..0000000
--- a/debian/control.modules.in
+++ /dev/null
@@ -1,22 +0,0 @@
-Source: ar5523
-Section: net
-Priority: extra
-Maintainer: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-Build-Depends: debhelper (>= 9.20120115),
- bzip2
-Standards-Version: 3.9.3
-
-Package: ar5523-modules-_KVERS_
-Depends: linux-image-_KVERS_
-Provides: ar5523-modules
-Architecture: any
-Description: ar5523 modules for Linux (kernel _KVERS_)
- This package contains the set of loadable kernel module for the
- ar5523 driver for Atheros wireless USB chipsets.
- .
- This package contains the compiled kernel modules for _KVERS_
- .
- If you have compiled your own kernel, you will most likely need to build
- your own ar5523-modules. The ar5523-source package has been
- provided for use with the Debian's module-assistant or kernel-package
- utilities to produce a version of ar5523-module for your kernel.
diff --git a/debian/copyright b/debian/copyright
deleted file mode 100644
index 5015c33..0000000
--- a/debian/copyright
+++ /dev/null
@@ -1,64 +0,0 @@
-This package was debianized by Stefan Lippers-Hollmann <s.l-h@gmx.de> on
-Wed, 22 Jul 2009 14:44:36 +0200.
-
-Copyright:
-    Copyright © 2006 Damien Bergamini <damien.bergamini@free.fr>
-    Copyright © 2007 Christoph Hellwig <hch@lst.de>
-
-License:
-    This driver is based on the uath driver written by Damien Bergamini for
-    OpenBSD, who did black-box analysis of the Windows binary driver to find
-    out how the hardware works.  It contains a lot magic numbers because of
-    that and only has minimal functionality.
-
-    This port is derives from the Linux kernel in general and the mac80211
-    wireless stack in particular, as such this amalgation as a whole falls
-    under the terms of the GPL-2.
-
-    BSD:
-    Permission to use, copy, modify, and distribute this software for any
-    purpose with or without fee is hereby granted, provided that the above
-    copyright notice and this permission notice appear in all copies.
-
-    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
-    WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
-    MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
-    ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
-    WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
-    ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
-    OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
-
-    GPL-2:
-    This package is free software; you can redistribute it and/or modify
-    it under the terms of the GNU General Public License as published by
-    the Free Software Foundation; either version 2 of the License, or
-    (at your option) any later version.
-
-    This package is distributed in the hope that it will be useful,
-    but WITHOUT ANY WARRANTY; without even the implied warranty of
-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-    GNU General Public License for more details.
-
-    You should have received a copy of the GNU General Public License
-    along with this package; if not, write to the Free Software
-    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
-
-    ISC:
-    Permission to use, copy, modify, and/or distribute this software for any
-    purpose with or without fee is hereby granted, provided that the above
-    copyright notice and this permission notice appear in all copies.
-
-    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
-    WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
-    MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
-    ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
-    WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
-    ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
-    OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
-
-On Debian systems, the complete text of the GNU General
-Public License can be found in `/usr/share/common-licenses/GPL-2'.
-
-The Debian packaging is Copyright © 2009 Stefan Lippers-Hollmann
-<s.l-h@gmx.de> and is triple licensed under ISC, the BSD license and the GPL-2,
-see above.
diff --git a/debian/patches/add-Gigaset-108.patch b/debian/patches/add-Gigaset-108.patch
deleted file mode 100644
index 2889b22..0000000
--- a/debian/patches/add-Gigaset-108.patch
+++ /dev/null
@@ -1,15 +0,0 @@
-add USB ID for Gigaset 108 (CyberTAN Technology)
-
-Changes-licensed-under: ISC
-Signed-off-by: Riccardo Magliocchetti <riccardo.magliocchetti@gmail.com>
-
---- a/drivers/net/wireless/ath/ar5523/ar5523.c
-+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
-@@ -1595,6 +1595,7 @@ static struct usb_device_id ar5523_id_ta
- 	AR5523_DEVICE_UX(0x2001, 0x3a04),	/* Dlink / DWLAG122 */
- 	AR5523_DEVICE_UG(0x1690, 0x0712),	/* Gigaset / AR5523 */
- 	AR5523_DEVICE_UG(0x1690, 0x0710),	/* Gigaset / SMCWUSBTG */
-+	AR5523_DEVICE_UG(0x129b, 0x160c),	/* Gigaset / USB stick 108 (CyberTAN Technology) */
- 	AR5523_DEVICE_UG(0x16ab, 0x7801),	/* Globalsun / AR5523_1 */
- 	AR5523_DEVICE_UX(0x16ab, 0x7811),	/* Globalsun / AR5523_2 */
- 	AR5523_DEVICE_UG(0x0d8e, 0x7802),	/* Globalsun / AR5523_3 */
diff --git a/debian/patches/add-Globalsun-AR5523.patch b/debian/patches/add-Globalsun-AR5523.patch
deleted file mode 100644
index ee1c6c6..0000000
--- a/debian/patches/add-Globalsun-AR5523.patch
+++ /dev/null
@@ -1,20 +0,0 @@
-add support for another Globalsun AR5523 device, as usual it switches USB 
-IDs as well:
-
-usb 1-5: New USB device found, idVendor=1385, idProduct=4251
-[...]
-usb 1-5: New USB device found, idVendor=1385, idProduct=4250
-
-Changes-licensed-under: ISC
-Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-
---- a/drivers/net/wireless/ath/ar5523/ar5523.c
-+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
-@@ -1598,6 +1598,7 @@ static struct usb_device_id ar5523_id_ta
- 	AR5523_DEVICE_UG(0x1690, 0x0710),	/* Gigaset / SMCWUSBTG */
- 	AR5523_DEVICE_UG(0x16ab, 0x7801),	/* Globalsun / AR5523_1 */
- 	AR5523_DEVICE_UX(0x16ab, 0x7811),	/* Globalsun / AR5523_2 */
-+	AR5523_DEVICE_UG(0x0d8e, 0x7802),	/* Globalsun / AR5523_3 */
- 	AR5523_DEVICE_UX(0x0846, 0x4300),	/* Netgear / WG111U */
- 	AR5523_DEVICE_UG(0x0846, 0x4250),	/* Netgear / WG111T */
- 	AR5523_DEVICE_UG(0x0846, 0x5f00),	/* Netgear / WPN111 */
diff --git a/debian/patches/add-support-for-Netgear-WPN111.patch b/debian/patches/add-support-for-Netgear-WPN111.patch
deleted file mode 100644
index 3aa2a31..0000000
--- a/debian/patches/add-support-for-Netgear-WPN111.patch
+++ /dev/null
@@ -1,15 +0,0 @@
-add support for Netgear WPN111, thanks to Jonathan <xtragb@gmail.com>
-
-Changes-licensed-under: ISC
-Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-
---- a/drivers/net/wireless/ath/ar5523/ar5523.c
-+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
-@@ -1589,6 +1589,7 @@ static struct usb_device_id ar5523_id_ta
- 	AR5523_DEVICE_UX(0x1435, 0x0828),	/* Wistronneweb / AR5523_2 */
- 	AR5523_DEVICE_UG(0x0cde, 0x0012),	/* Zcom / AR5523 */
- 	AR5523_DEVICE_UG(0x1385, 0x4250),	/* Netgear3 / WG111T (2) */
-+	AR5523_DEVICE_UG(0x1385, 0x5f00),	/* Netgear / WPN111 */
- 	{ }
- };
- MODULE_DEVICE_TABLE(usb, ar5523_id_table);
diff --git a/debian/patches/clarify-licensing.patch b/debian/patches/clarify-licensing.patch
deleted file mode 100644
index d46bf0b..0000000
--- a/debian/patches/clarify-licensing.patch
+++ /dev/null
@@ -1,17 +0,0 @@
-Synchronize MODULE_LICENSE() with the stated license header.
-
-[2009-07-22, 19:03:11] < mcgrof> pkgadd: I asked hch and he's OK with using MODULE_LICENSE("Dual GPL/BSD") and changing hte header on the probe.c file to ISC
-
-Not-Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-
---- a/drivers/net/wireless/ath/ar5523/ar5523.c
-+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
-@@ -1661,7 +1661,7 @@ static void __exit ar5523_exit(void)
- 	usb_deregister(&ar5523_driver);
- }
- 
--MODULE_LICENSE("GPL");
-+MODULE_LICENSE("Dual BSD/GPL");
- 
- module_init(ar5523_init);
- module_exit(ar5523_exit);
diff --git a/debian/patches/declare-firmware.patch b/debian/patches/declare-firmware.patch
deleted file mode 100644
index 73edc84..0000000
--- a/debian/patches/declare-firmware.patch
+++ /dev/null
@@ -1,15 +0,0 @@
-declare MODULE_FIRMWARE()
-
-Changes-licensed-under: ISC
-Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-
---- a/drivers/net/wireless/ath/ar5523/ar5523.c
-+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
-@@ -1612,6 +1612,7 @@ static void __exit ar5523_exit(void)
- }
- 
- MODULE_LICENSE("Dual BSD/GPL");
-+MODULE_FIRMWARE(AR5523_FIRMWARE_FILE);
- 
- module_init(ar5523_init);
- module_exit(ar5523_exit);
diff --git a/debian/patches/fix-comment-style.patch b/debian/patches/fix-comment-style.patch
deleted file mode 100644
index 623448c..0000000
--- a/debian/patches/fix-comment-style.patch
+++ /dev/null
@@ -1,43 +0,0 @@
-ar5523: use ANSI C, instead of C++, comments.
-
-Changes-licensed-under: ISC
-Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-
---- a/drivers/net/wireless/ath/ar5523/ar5523.c
-+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
-@@ -69,7 +69,7 @@ enum {
- 	usb_rcvbulkpipe((dev), AR5523_DATA_RX_PIPE)
- 
- enum {
--	// XXX: msec or HZ?
-+	/* XXX: msec or HZ? */
- 	AR5523_DATA_TIMEOUT		= 10000,
- 	AR5523_CMD_TIMEOUT		= 1000,
- };
-@@ -594,7 +594,7 @@ static void ar5523_data_rx_cb(struct urb
- 
- 	error = usb_submit_urb(urb, GFP_ATOMIC);
- 	if (error) {
--		// XXX: handle
-+		/* XXX: handle */
- 		ar5523_err(ar, "error %d when resubmitting rx data urb\n",
- 			       error);
- 	}
-@@ -1104,7 +1104,7 @@ static void ar5523_cmd_rx_cb(struct urb
-  resubmit:
- 	error = usb_submit_urb(urb, GFP_ATOMIC);
- 	if (error) {
--		// XXX: handle
-+		/* XXX: handle */
- 		ar5523_err(ar, "error %d when resubmitting rx urb\n", error);
- 	}
- }
-@@ -1363,7 +1363,7 @@ static int ar5523_load_firmware(struct u
- 	const struct firmware *fw;
- 	void *fwbuf;
- 	int len, offset;
--	int foolen; // XXX(hch): handle short transfers
-+	int foolen; /* XXX(hch): handle short transfers */
- 	int error = -ENXIO;
- 	
- 	if (request_firmware(&fw, AR5523_FIRMWARE_FILE, &dev->dev)) {
diff --git a/debian/patches/kcompat-2.6.25.patch b/debian/patches/kcompat-2.6.25.patch
deleted file mode 100644
index d33d2d4..0000000
--- a/debian/patches/kcompat-2.6.25.patch
+++ /dev/null
@@ -1,37 +0,0 @@
-Apply the equivalent of:
-
-#commit 32bfd35d4b63bd63de4bb0d791ef049c3c868726
-#Author: Johannes Berg <johannes@sipsolutions.net>
-#Date:   Wed Dec 19 01:31:26 2007 +0100
-#
-#    mac80211: dont use interface indices in drivers
-#
-#    This patch gets rid of the if_id stuff where possible in favour of
-#    a new per-virtual-interface structure "struct ieee80211_vif". This
-#    structure is located at the end of the per-interface structure and
-#    contains a variable length driver-use data area.
-#
-#    This has two advantages:
-#     * removes the need to look up interfaces by if_id, this is better
-#       for working with network namespaces and performance
-#     * allows drivers to store and retrieve per-interface data without
-#       having to allocate own lists/hash tables
-#
-#    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
-#    Signed-off-by: John W. Linville <linville@tuxdriver.com>
-
-Changes-licensed-under: ISC
-Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-
---- a/drivers/net/wireless/ath/ar5523/ar5523.c
-+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
-@@ -966,7 +966,8 @@ static int ar5523_config(struct ieee8021
- 	return 0;
- }
- 
--static int ar5523_config_interface(struct ieee80211_hw *hw, int if_id,
-+static int ar5523_config_interface(struct ieee80211_hw *hw,
-+		struct ieee80211_vif *vif,
- 		struct ieee80211_if_conf *ifconf)
- {
- 	struct ar5523 *ar = hw->priv;
diff --git a/debian/patches/kcompat-2.6.26.patch b/debian/patches/kcompat-2.6.26.patch
deleted file mode 100644
index 44ed041..0000000
--- a/debian/patches/kcompat-2.6.26.patch
+++ /dev/null
@@ -1,230 +0,0 @@
-Apply the equivalent of:
-
-#commit 8318d78a44d49ac1edf2bdec7299de3617c4232e
-#Author: Johannes Berg <johannes@sipsolutions.net>
-#Date:   Thu Jan 24 19:38:38 2008 +0100
-#
-#    cfg80211 API for channels/bitrates, mac80211 and driver conversion
-#
-#    This patch creates new cfg80211 wiphy API for channel and bitrate
-#    registration and converts mac80211 and drivers to the new API. The
-#    old mac80211 API is completely ripped out. All drivers (except ath5k)
-#    are updated to the new API, in many cases I expect that optimisations
-#    can be done.
-#
-#    Along with the regulatory code I've also ripped out the
-#    IEEE80211_HW_DEFAULT_REG_DOMAIN_CONFIGURED flag, I believe it to be
-#    unnecessary if the hardware simply gives us whatever channels it wants
-#    to support and we then enable/disable them as required, which is pretty
-#    much required for travelling.
-#
-#    Additionally, the patch adds proper "basic" rate handling for STA
-#    mode interface, AP mode interface will have to have new API added
-#    to allow userspace to set the basic rate set, currently it'll be
-#    empty... However, the basic rate handling will need to be moved to
-#    the BSS conf stuff.
-#
-#    I do expect there to be bugs in this, especially wrt. transmit
-#    power handling where I'm basically clueless about how it should work.
-#
-#    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
-#    Signed-off-by: John W. Linville <linville@tuxdriver.com>
-
-Changes-licensed-under: ISC
-Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-Signed-off-by: Antonio Galea <ant9000@netwise.it>
-
---- a/drivers/net/wireless/ath/ar5523/ar5523.c
-+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
-@@ -129,7 +129,7 @@ struct ar5523 {
- 
- 	struct ieee80211_channel channels[14];
- 	struct ieee80211_rate	 rates[12];
--	struct ieee80211_hw_mode modes[2];
-+	struct ieee80211_supported_band band;
- 	int			mode;
- 
- };
-@@ -416,12 +416,13 @@ static int ar5523_set_chan(struct ar5523
- 
- 	memset(&chan, 0, sizeof(chan));
- 	chan.flags  = cpu_to_be32(0x1400);
--	chan.freq   = cpu_to_be32(conf->freq);
-+	chan.freq   = cpu_to_be32(conf->channel->center_freq);
- 	chan.magic1 = cpu_to_be32(20);
- 	chan.magic2 = cpu_to_be32(50);
- 	chan.magic3 = cpu_to_be32(1);
- 
--	ar5523_dbg(ar, "switching to channel %d\n", conf->channel);
-+	ar5523_dbg(ar, "switching to channel %d\n",
-+		   ieee80211_frequency_to_channel(conf->channel->center_freq));
- 
- 	return ar5523_cmd_write(ar, AR5523_CMD_SET_CHAN,
- 				&chan, sizeof(chan), 0);
-@@ -574,9 +575,8 @@ static void ar5523_data_rx_cb(struct urb
- 	 * need to poke into the descriptor if there might be more useful
- 	 * information in there.
- 	 */
--	rx_status.freq =  be32_to_cpu(desc->freq);
--	rx_status.channel = hw->conf.channel;
--	rx_status.phymode = hw->conf.phymode;
-+	rx_status.freq = be32_to_cpu(desc->freq);
-+	rx_status.band = hw->conf.channel->band;
- 	rx_status.ssi = be32_to_cpu(desc->rssi);
- 	
- 	ieee80211_rx_irqsafe(hw, data->skb, &rx_status);
-@@ -1281,15 +1281,16 @@ static int ar5523_reset(struct ar5523 *a
- static int ar5523_query_eeprom(struct ar5523 *ar)
- {
-         int error;
-+	u8 perm_addr[ETH_ALEN];
- 	__be32 tmp;
- 
- 	/* retrieve MAC address */
--	error = ar5523_read_eeprom(ar, AR5523_EEPROM_MACADDR,
--				   &ar->hw->wiphy->perm_addr);
-+	error = ar5523_read_eeprom(ar, AR5523_EEPROM_MACADDR, perm_addr);
- 	if (error) {
- 		ar5523_err(ar, "could not read MAC address\n");
- 		return error;
- 	}
-+	SET_IEEE80211_PERM_ADDR(ar->hw, perm_addr);
- 
- 	/* retrieve the maximum frame size that the hardware can receive */
- 	error = ar5523_read_eeprom(ar, AR5523_EEPROM_RXBUFSZ, &tmp);
-@@ -1308,101 +1309,51 @@ static int ar5523_query_eeprom(struct ar
-  * to common code as in OpenBSD.
-  */
- static const struct ieee80211_rate ar5523_rates[] = {
--        { .rate = 10,
--	  .val = 0,
--	  .flags = IEEE80211_RATE_CCK },
--	{ .rate = 20,
--	  .val = 1,
--	  .flags = IEEE80211_RATE_CCK },
--	{ .rate = 55,
--	  .val = 2,
--	  .flags = IEEE80211_RATE_CCK },
--	{ .rate = 110,
--	  .val = 3,
--	  .flags = IEEE80211_RATE_CCK },
--	{ .rate = 60,
--	  .val = 4,
--	  .flags = IEEE80211_RATE_OFDM },
--	{ .rate = 90,
--	  .val = 5,
--	  .flags = IEEE80211_RATE_OFDM },
--	{ .rate = 120,
--	  .val = 6,
--	  .flags = IEEE80211_RATE_OFDM },
--	{ .rate = 180,
--	  .val = 7,
--	  .flags = IEEE80211_RATE_OFDM },
--	{ .rate = 240,
--	  .val = 8,
--	  .flags = IEEE80211_RATE_OFDM },
--	{ .rate = 360,
--	  .val = 9,
--	  .flags = IEEE80211_RATE_OFDM },
--	{ .rate = 480,
--	  .val = 10,
--	  .flags = IEEE80211_RATE_OFDM },
--	{ .rate = 540,
--	  .val = 11,
--	  .flags = IEEE80211_RATE_OFDM },
-+	{ .bitrate = 10, .hw_value = 0, },
-+	{ .bitrate = 20, .hw_value = 1, },
-+	{ .bitrate = 55, .hw_value = 2, },
-+	{ .bitrate = 110, .hw_value = 3, },
-+	{ .bitrate = 60, .hw_value = 4, },
-+	{ .bitrate = 90, .hw_value = 5, },
-+	{ .bitrate = 120, .hw_value = 6, },
-+	{ .bitrate = 180, .hw_value = 7, },
-+	{ .bitrate = 240, .hw_value = 8, },
-+	{ .bitrate = 360, .hw_value = 9, },
-+	{ .bitrate = 480, .hw_value = 10, },
-+	{ .bitrate = 540, .hw_value = 11, },
- };
- 
- static const struct ieee80211_channel ar5523_channels[] = {
--        { .chan = 1,
--	  .freq = 2412},
--	{ .chan = 2,
--	  .freq = 2417},
--	{ .chan = 3,
--	  .freq = 2422},
--	{ .chan = 4,
--	  .freq = 2427},
--	{ .chan = 5,
--	  .freq = 2432},
--	{ .chan = 6,
--	  .freq = 2437},
--	{ .chan = 7,
--	  .freq = 2442},
--	{ .chan = 8,
--	  .freq = 2447},
--	{ .chan = 9,
--	  .freq = 2452},
--	{ .chan = 10,
--	  .freq = 2457},
--	{ .chan = 11,
--	  .freq = 2462},
--	{ .chan = 12,
--	  .freq = 2467},
--	{ .chan = 13,
--	  .freq = 2472},
--	{ .chan = 14,
--	  .freq = 2484},
-+	{ .center_freq = 2412 },
-+	{ .center_freq = 2417 },
-+	{ .center_freq = 2422 },
-+	{ .center_freq = 2427 },
-+	{ .center_freq = 2432 },
-+	{ .center_freq = 2437 },
-+	{ .center_freq = 2442 },
-+	{ .center_freq = 2447 },
-+	{ .center_freq = 2452 },
-+	{ .center_freq = 2457 },
-+	{ .center_freq = 2462 },
-+	{ .center_freq = 2467 },
-+	{ .center_freq = 2472 },
-+	{ .center_freq = 2484 },
- };
- 
- static int ar5523_init_modes(struct ar5523 *ar)
- {
--	int error;
-+	BUILD_BUG_ON(sizeof(ar->channels) != sizeof(ar5523_channels));
-+	BUILD_BUG_ON(sizeof(ar->rates) != sizeof(ar5523_rates));
- 
- 	memcpy(ar->channels, ar5523_channels, sizeof(ar5523_channels));
- 	memcpy(ar->rates, ar5523_rates, sizeof(ar5523_rates));
- 
--	ar->modes[0].mode	= MODE_IEEE80211G;
--	ar->modes[0].num_rates	= ARRAY_SIZE(ar5523_rates);
--	ar->modes[0].rates	= ar->rates;
--	ar->modes[0].num_channels = ARRAY_SIZE(ar5523_channels);
--	ar->modes[0].channels	= ar->channels;
--
--	error = ieee80211_register_hwmode(ar->hw, &ar->modes[0]);
--	if (error)
--		return error;
--
--	ar->modes[1].mode	= MODE_IEEE80211B;
--	ar->modes[1].num_rates	= 4;
--	ar->modes[1].rates	= ar->rates;
--	ar->modes[1].num_channels = ARRAY_SIZE(ar5523_channels);
--	ar->modes[1].channels	= ar->channels;
--
--	error = ieee80211_register_hwmode(ar->hw, &ar->modes[1]);
--	if (error)
--		return error;
-+	ar->band.band = IEEE80211_BAND_2GHZ;
-+	ar->band.channels = ar->channels;
-+	ar->band.n_channels = ARRAY_SIZE(ar5523_channels);
-+	ar->band.bitrates = ar->rates;
-+	ar->band.n_bitrates = ARRAY_SIZE(ar5523_rates);
-+	ar->hw->wiphy->bands[IEEE80211_BAND_2GHZ] = &ar->band;
- 
- 	return 0;
- }
diff --git a/debian/patches/kcompat-2.6.32.patch b/debian/patches/kcompat-2.6.32.patch
deleted file mode 100644
index 21bc180..0000000
--- a/debian/patches/kcompat-2.6.32.patch
+++ /dev/null
@@ -1,217 +0,0 @@
-add kernel 2.6.32 compatibility.
-
-Changes-licensed-under: ISC
-Signed-off-by: Riccardo Magliocchetti <riccardo.magliocchetti@gmail.com>
-Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-
---- a/drivers/net/wireless/ath/ar5523/ar5523.c
-+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
-@@ -100,7 +100,6 @@ struct ar5523_rx_cmd {
- struct ar5523_tx_data {
- 	struct ar5523		*ar;
- 	struct sk_buff		*skb;
--	struct ieee80211_tx_control *control;
- };
- 
- struct ar5523_rx_data {
-@@ -500,7 +499,8 @@ static int ar5523_tx_null(struct ar5523
- 	return error;
- }
- 
--static int ar5523_set_rates(struct ar5523 *ar, struct ieee80211_if_conf *ifconf)
-+static int ar5523_set_rates(struct ar5523 *ar,
-+			    struct ieee80211_bss_conf *ifconf)
- {
-         struct ar5523_cmd_rates rates;
- 
-@@ -584,9 +584,10 @@ static void ar5523_data_rx_cb(struct urb
- 	 */
- 	rx_status.freq = be32_to_cpu(desc->freq);
- 	rx_status.band = hw->conf.channel->band;
--	rx_status.ssi = be32_to_cpu(desc->rssi);
--	
--	ieee80211_rx_irqsafe(hw, data->skb, &rx_status);
-+	rx_status.signal = be32_to_cpu(desc->rssi);
-+
-+	memcpy(IEEE80211_SKB_RXCB(data->skb), &rx_status, sizeof(rx_status));
-+	ieee80211_rx_irqsafe(hw, data->skb);
- 	
- 	data->skb = __dev_alloc_skb(ar->rxbufsz, GFP_ATOMIC);
- 	if (!data->skb) {
-@@ -793,7 +794,7 @@ static void ar5523_data_tx_cb(struct urb
- 	struct sk_buff *skb = urb->context;
- 	struct ar5523_tx_data *data = (struct ar5523_tx_data *)skb->cb;
- 	struct ar5523 *ar = data->ar;
--	struct ieee80211_tx_status status = { {0} };
-+	struct ieee80211_tx_info *txi;
- 
- 	ar5523_dbg(ar, "data tx urb completed\n");
- 
-@@ -806,23 +807,23 @@ static void ar5523_data_tx_cb(struct urb
- 		goto out;
- 	}
- 
--	memcpy(&status.control, data->control, sizeof(status.control));
-+	txi = IEEE80211_SKB_CB(skb);
- 	skb_pull(skb, sizeof(struct ar5523_tx_desc) + sizeof(__be32));
- 
--	status.flags |= IEEE80211_TX_STATUS_ACK;
--	ieee80211_tx_status_irqsafe(ar->hw, skb, &status);
-+	txi->flags |= IEEE80211_TX_STAT_ACK;
-+	ieee80211_tx_status_irqsafe(ar->hw, skb);
-  out:
- 	atomic_dec(&ar->tx_data_queued);
- 	usb_free_urb(urb);
- }
- 
--static int ar5523_tx(struct ieee80211_hw *hw, struct sk_buff *skb,
--		struct ieee80211_tx_control *control)
-+static int ar5523_tx(struct ieee80211_hw *hw, struct sk_buff *skb)
- {
- 	struct ieee80211_hdr *wh = (struct ieee80211_hdr *)skb->data;
- 	struct ar5523 *ar = hw->priv;
- 	struct ar5523_tx_data *data;
- 	struct ar5523_tx_desc *desc;
-+	struct ieee80211_tx_info *info = IEEE80211_SKB_CB(skb);
- 	struct urb *urb;
- 	int paylen = skb->len;
- 	int error = 0;
-@@ -843,10 +844,6 @@ static int ar5523_tx(struct ieee80211_hw
- 	data = (struct ar5523_tx_data *)skb->cb;
- 	data->ar = ar;
- 
--	data->control = kmemdup(control, sizeof(*control), GFP_ATOMIC);
--	if (!data->control)
--		goto out_free_urb;
--
- 	desc = (struct ar5523_tx_desc *)skb_push(skb, sizeof(*desc));
- 	hdr = (__be32 *)skb_push(skb, sizeof(__be32));
- 
-@@ -877,7 +874,7 @@ static int ar5523_tx(struct ieee80211_hw
- 	error = usb_submit_urb(urb, GFP_ATOMIC);
- 	if (error) {
- 		ar5523_err(ar, "error %d when submitting tx urb\n", error);
--		goto out_free_control;
-+		goto out_free_urb;
- 	}
- 
- 
-@@ -885,8 +882,6 @@ static int ar5523_tx(struct ieee80211_hw
- 
- 	return NETDEV_TX_OK;
- 
-- out_free_control:
--	kfree(control);
-  out_free_urb:
- 	usb_free_urb(urb);
-  out_free_skb:
-@@ -901,15 +896,15 @@ static int ar5523_add_interface(struct i
- 
- 	ar5523_dbg(ar, "add interface called\n");
- 
--	/* NOTE: using IEEE80211_IF_TYPE_MNTR to indicate no mode selected */
--	if (ar->mode != IEEE80211_IF_TYPE_MNTR) {
-+	/* NOTE: using NL80211_IFTYPE_MONITOR to indicate no mode selected */
-+	if (ar->mode != NL80211_IFTYPE_MONITOR) {
- 		ar5523_dbg(ar, "invalid add_interface\n");
- 		return -EOPNOTSUPP;
- 	}
- 
- 	switch (conf->type) {
--	case IEEE80211_IF_TYPE_STA:
--	case IEEE80211_IF_TYPE_MNTR:
-+	case NL80211_IFTYPE_STATION:
-+	case NL80211_IFTYPE_MONITOR:
- 		ar->mode = conf->type;
- 		break;
- 	default:
-@@ -926,12 +921,13 @@ static void ar5523_remove_interface(stru
- 
- 	ar5523_dbg(ar, "remove interface called\n");
- 
--	ar->mode = IEEE80211_IF_TYPE_MNTR;
-+	ar->mode = NL80211_IFTYPE_MONITOR;
- }
- 
--static int ar5523_config(struct ieee80211_hw *hw, struct ieee80211_conf *conf)
-+static int ar5523_config(struct ieee80211_hw *hw, u32 changed)
- {
- 	struct ar5523 *ar = hw->priv;
-+	struct ieee80211_conf *conf = &hw->conf;
- 	__be32 val;
- 	int error;
- 
-@@ -975,9 +971,10 @@ static int ar5523_config(struct ieee8021
- 	return 0;
- }
- 
--static int ar5523_config_interface(struct ieee80211_hw *hw,
-+static void ar5523_bss_info_changed(struct ieee80211_hw *hw,
- 		struct ieee80211_vif *vif,
--		struct ieee80211_if_conf *ifconf)
-+		struct ieee80211_bss_conf *ifconf,
-+		u32 changed)
- {
- 	struct ar5523 *ar = hw->priv;
- 	struct ar5523_cmd_bssid bssid;
-@@ -986,10 +983,13 @@ static int ar5523_config_interface(struc
- 	__be32 val;
- 	int error;
- 
--	ar5523_dbg(ar, "config_interface called\n");
-+	ar5523_dbg(ar, "bss_info_changed called\n");
- 
- 	ar5523_cmd_write(ar, AR5523_CMD_24, NULL, 0, 0);
- 
-+	if (!(changed & BSS_CHANGED_BSSID))
-+		return;
-+
- 	memset(&bssid, 0, sizeof(bssid));
- 	bssid.len = cpu_to_be32(AR5523_ADDR_LEN);
- 	memcpy(&bssid.bssid, &ifconf->bssid, AR5523_ADDR_LEN);
-@@ -1009,7 +1009,7 @@ static int ar5523_config_interface(struc
- 	error = ar5523_set_rates(ar, ifconf);
- 	if (error) {
- 		ar5523_err(ar, "could not set negotiated rate set\n");
--		return error;
-+		return;
- 	}
- 
- 
-@@ -1035,13 +1035,11 @@ static int ar5523_config_interface(struc
- 
- 	/* start statistics timer */
- 	mod_timer(&ar->stat_timer, jiffies + HZ);
--
--	return 0;
- }
- 
- static void ar5523_configure_filter(struct ieee80211_hw *hw,
- 		unsigned int changed_flags, unsigned int *total_flags,
--		int mc_count, struct dev_addr_list *mc_list)
-+		u64 multicast)
- {
- 	struct ar5523 *ar = hw->priv;
- 
-@@ -1059,7 +1057,7 @@ static const struct ieee80211_ops ar5523
- 	.add_interface		= ar5523_add_interface,
- 	.remove_interface	= ar5523_remove_interface,
- 	.config			= ar5523_config,
--	.config_interface	= ar5523_config_interface,
-+	.bss_info_changed	= ar5523_bss_info_changed,
- 	.configure_filter	= ar5523_configure_filter,
- };
- 
-@@ -1526,10 +1524,11 @@ static int ar5523_probe(struct usb_inter
- 
- 	setup_timer(&ar->stat_timer, ar5523_stat, (unsigned long)ar);
- 
--	ar->mode = IEEE80211_IF_TYPE_MNTR;
-+	ar->mode = NL80211_IFTYPE_MONITOR;
- 
- 	hw->flags |= IEEE80211_HW_RX_INCLUDES_FCS;
- 	hw->extra_tx_headroom = sizeof(struct ar5523_tx_desc) + sizeof(__be32);
-+	hw->wiphy->interface_modes = BIT(NL80211_IFTYPE_STATION);
- 	hw->queues = 1;
- 
- 	error = ar5523_init_modes(ar);
diff --git a/debian/patches/kcompat-2.6.34.patch b/debian/patches/kcompat-2.6.34.patch
deleted file mode 100644
index 607f65d..0000000
--- a/debian/patches/kcompat-2.6.34.patch
+++ /dev/null
@@ -1,117 +0,0 @@
-add kernel 2.6.34 compatibility.
-
-Changes-licensed-under: ISC
-Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-
---- a/drivers/net/wireless/ath/ar5523/ar5523.c
-+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
-@@ -870,7 +870,7 @@ static int ar5523_tx(struct ieee80211_hw
- }
- 
- static int ar5523_add_interface(struct ieee80211_hw *hw,
--		struct ieee80211_if_init_conf *conf)
-+		struct ieee80211_vif *vif)
- {
- 	struct ar5523 *ar = hw->priv;
- 
-@@ -882,10 +882,10 @@ static int ar5523_add_interface(struct i
- 		return -EOPNOTSUPP;
- 	}
- 
--	switch (conf->type) {
-+	switch (vif->type) {
- 	case NL80211_IFTYPE_STATION:
- 	case NL80211_IFTYPE_MONITOR:
--		ar->mode = conf->type;
-+		ar->mode = vif->type;
- 		break;
- 	default:
- 		return -EOPNOTSUPP;
-@@ -895,7 +895,7 @@ static int ar5523_add_interface(struct i
- }
- 
- static void ar5523_remove_interface(struct ieee80211_hw *hw,
--		struct ieee80211_if_init_conf *conf)
-+		struct ieee80211_vif *vif)
- {
- 	struct ar5523 *ar = hw->priv;
- 
-@@ -1117,8 +1117,8 @@ static void ar5523_free_tx_cmds(struct a
- 		struct ar5523_tx_cmd *cmd = &ar->tx_cmd[i];
- 
- 		usb_kill_urb(cmd->urb);
--		usb_buffer_free(ar->dev, AR5523_MAX_TXCMDSZ,
--				cmd->buf, cmd->urb->transfer_dma);
-+		usb_free_coherent(ar->dev, AR5523_MAX_TXCMDSZ,
-+				  cmd->buf, cmd->urb->transfer_dma);
- 		usb_free_urb(cmd->urb);
- 	}
- }
-@@ -1137,8 +1137,8 @@ static int ar5523_alloc_tx_cmds(struct a
- 			ar5523_err(ar, "could not allocate tx urb\n");
- 			goto out;
- 		}
--		cmd->buf = usb_buffer_alloc(ar->dev, AR5523_MAX_TXCMDSZ,
--					    GFP_KERNEL,
-+		cmd->buf = usb_alloc_coherent(ar->dev, AR5523_MAX_TXCMDSZ,
-+					      GFP_KERNEL,
- 					    &cmd->urb->transfer_dma);
- 		if (!cmd->buf) {
- 			ar5523_err(ar, "could not allocate tx buffer\n");
-@@ -1154,8 +1154,8 @@ static int ar5523_alloc_tx_cmds(struct a
-  	while (--i >= 0) {
- 		struct ar5523_tx_cmd *cmd = &ar->tx_cmd[i];
- 
--		usb_buffer_free(ar->dev, AR5523_MAX_TXCMDSZ,
--				cmd->buf, cmd->urb->transfer_dma);
-+		usb_free_coherent(ar->dev, AR5523_MAX_TXCMDSZ,
-+				  cmd->buf, cmd->urb->transfer_dma);
- 		usb_free_urb(cmd->urb);
- 	}
- 
-@@ -1170,8 +1170,8 @@ static void ar5523_free_rx_cmds(struct a
- 		struct ar5523_rx_cmd *cmd = &ar->rx_cmd[i];
- 
- 		usb_kill_urb(cmd->urb);
--		usb_buffer_free(ar->dev, AR5523_MAX_RXCMDSZ,
--				cmd->buf, cmd->urb->transfer_dma);
-+		usb_free_coherent(ar->dev, AR5523_MAX_RXCMDSZ,
-+				  cmd->buf, cmd->urb->transfer_dma);
- 		usb_free_urb(cmd->urb);
- 	}
- }
-@@ -1190,9 +1190,9 @@ static int ar5523_alloc_rx_cmds(struct a
- 			ar5523_err(ar, "could not allocate rx urb\n");
- 			goto out;
- 		}
--		cmd->buf = usb_buffer_alloc(ar->dev, AR5523_MAX_TXCMDSZ,
--					    GFP_KERNEL,
--					    &cmd->urb->transfer_dma);
-+		cmd->buf = usb_alloc_coherent(ar->dev, AR5523_MAX_TXCMDSZ,
-+					      GFP_KERNEL,
-+					      &cmd->urb->transfer_dma);
- 		if (!cmd->buf) {
- 			ar5523_err(ar, "could not allocate rx buffer\n");
- 			usb_free_urb(cmd->urb);
-@@ -1208,8 +1208,8 @@ static int ar5523_alloc_rx_cmds(struct a
- 		if (error) {
- 			ar5523_err(ar, "error %d when submitting rx urb\n",
- 				       error);
--			usb_buffer_free(ar->dev, AR5523_MAX_RXCMDSZ,
--					cmd->buf, cmd->urb->transfer_dma);
-+			usb_free_coherent(ar->dev, AR5523_MAX_RXCMDSZ,
-+					  cmd->buf, cmd->urb->transfer_dma);
- 			usb_free_urb(cmd->urb);
- 			return error;
- 		}
-@@ -1223,8 +1223,8 @@ static int ar5523_alloc_rx_cmds(struct a
- 
- 		usb_kill_urb(cmd->urb);
- 
--		usb_buffer_free(ar->dev, AR5523_MAX_RXCMDSZ,
--				cmd->buf, cmd->urb->transfer_dma);
-+		usb_free_coherent(ar->dev, AR5523_MAX_RXCMDSZ,
-+				  cmd->buf, cmd->urb->transfer_dma);
- 		usb_free_urb(cmd->urb);
- 	}
- 
diff --git a/debian/patches/kcompat-2.6.35.patch b/debian/patches/kcompat-2.6.35.patch
deleted file mode 100644
index 5622926..0000000
--- a/debian/patches/kcompat-2.6.35.patch
+++ /dev/null
@@ -1,88 +0,0 @@
-add kernel 2.6.35 compatibility.
-
-Changes-licensed-under: ISC
-Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-
---- a/drivers/net/wireless/ath/ar5523/ar5523.c
-+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
-@@ -1117,8 +1117,8 @@ static void ar5523_free_tx_cmds(struct a
- 		struct ar5523_tx_cmd *cmd = &ar->tx_cmd[i];
- 
- 		usb_kill_urb(cmd->urb);
--		usb_buffer_free(ar->dev, AR5523_MAX_TXCMDSZ,
--				cmd->buf, cmd->urb->transfer_dma);
-+		usb_free_coherent(ar->dev, AR5523_MAX_TXCMDSZ,
-+				  cmd->buf, cmd->urb->transfer_dma);
- 		usb_free_urb(cmd->urb);
- 	}
- }
-@@ -1137,9 +1137,9 @@ static int ar5523_alloc_tx_cmds(struct a
- 			ar5523_err(ar, "could not allocate tx urb\n");
- 			goto out;
- 		}
--		cmd->buf = usb_buffer_alloc(ar->dev, AR5523_MAX_TXCMDSZ,
--					    GFP_KERNEL,
--					    &cmd->urb->transfer_dma);
-+		cmd->buf = usb_alloc_coherent(ar->dev, AR5523_MAX_TXCMDSZ,
-+					      GFP_KERNEL,
-+					      &cmd->urb->transfer_dma);
- 		if (!cmd->buf) {
- 			ar5523_err(ar, "could not allocate tx buffer\n");
- 			usb_free_urb(cmd->urb);
-@@ -1154,8 +1154,8 @@ static int ar5523_alloc_tx_cmds(struct a
-  	while (--i >= 0) {
- 		struct ar5523_tx_cmd *cmd = &ar->tx_cmd[i];
- 
--		usb_buffer_free(ar->dev, AR5523_MAX_TXCMDSZ,
--				cmd->buf, cmd->urb->transfer_dma);
-+		usb_free_coherent(ar->dev, AR5523_MAX_TXCMDSZ,
-+				  cmd->buf, cmd->urb->transfer_dma);
- 		usb_free_urb(cmd->urb);
- 	}
- 
-@@ -1170,8 +1170,8 @@ static void ar5523_free_rx_cmds(struct a
- 		struct ar5523_rx_cmd *cmd = &ar->rx_cmd[i];
- 
- 		usb_kill_urb(cmd->urb);
--		usb_buffer_free(ar->dev, AR5523_MAX_RXCMDSZ,
--				cmd->buf, cmd->urb->transfer_dma);
-+		usb_free_coherent(ar->dev, AR5523_MAX_RXCMDSZ,
-+				  cmd->buf, cmd->urb->transfer_dma);
- 		usb_free_urb(cmd->urb);
- 	}
- }
-@@ -1190,9 +1190,9 @@ static int ar5523_alloc_rx_cmds(struct a
- 			ar5523_err(ar, "could not allocate rx urb\n");
- 			goto out;
- 		}
--		cmd->buf = usb_buffer_alloc(ar->dev, AR5523_MAX_TXCMDSZ,
--					    GFP_KERNEL,
--					    &cmd->urb->transfer_dma);
-+		cmd->buf = usb_alloc_coherent(ar->dev, AR5523_MAX_TXCMDSZ,
-+					      GFP_KERNEL,
-+					      &cmd->urb->transfer_dma);
- 		if (!cmd->buf) {
- 			ar5523_err(ar, "could not allocate rx buffer\n");
- 			usb_free_urb(cmd->urb);
-@@ -1208,8 +1208,8 @@ static int ar5523_alloc_rx_cmds(struct a
- 		if (error) {
- 			ar5523_err(ar, "error %d when submitting rx urb\n",
- 				       error);
--			usb_buffer_free(ar->dev, AR5523_MAX_RXCMDSZ,
--					cmd->buf, cmd->urb->transfer_dma);
-+			usb_free_coherent(ar->dev, AR5523_MAX_RXCMDSZ,
-+					  cmd->buf, cmd->urb->transfer_dma);
- 			usb_free_urb(cmd->urb);
- 			return error;
- 		}
-@@ -1223,8 +1223,8 @@ static int ar5523_alloc_rx_cmds(struct a
- 
- 		usb_kill_urb(cmd->urb);
- 
--		usb_buffer_free(ar->dev, AR5523_MAX_RXCMDSZ,
--				cmd->buf, cmd->urb->transfer_dma);
-+		usb_free_coherent(ar->dev, AR5523_MAX_RXCMDSZ,
-+				  cmd->buf, cmd->urb->transfer_dma);
- 		usb_free_urb(cmd->urb);
- 	}
- 
diff --git a/debian/patches/kcompat-3.5.patch b/debian/patches/kcompat-3.5.patch
deleted file mode 100644
index d006b10..0000000
--- a/debian/patches/kcompat-3.5.patch
+++ /dev/null
@@ -1,41 +0,0 @@
-add kernel 3.3 compatibility.
-
-Changes-licensed-under: ISC
-Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-
---- a/drivers/net/wireless/ath/ar5523/ar5523.c
-+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
-@@ -798,7 +798,7 @@ static void ar5523_data_tx_cb(struct urb
- 	usb_free_urb(urb);
- }
- 
--static int ar5523_tx(struct ieee80211_hw *hw, struct sk_buff *skb)
-+static void ar5523_tx(struct ieee80211_hw *hw, struct sk_buff *skb)
- {
- 	struct ieee80211_hdr *wh = (struct ieee80211_hdr *)skb->data;
- 	struct ar5523 *ar = hw->priv;
-@@ -813,7 +813,7 @@ static int ar5523_tx(struct ieee80211_hw
- 
- 	if (atomic_read(&ar->tx_data_queued) >= AR5523_TX_DATA_COUNT) {
- 		ar5523_dbg(ar, "tx queue full\n");
--		return NETDEV_TX_BUSY;
-+		return;
- 	}
- 
- 	urb = usb_alloc_urb(0, GFP_ATOMIC);
-@@ -860,13 +860,13 @@ static int ar5523_tx(struct ieee80211_hw
- 
- 	atomic_inc(&ar->tx_data_queued);
- 
--	return NETDEV_TX_OK;
-+	return;
- 
-  out_free_urb:
- 	usb_free_urb(urb);
-  out_free_skb:
- 	kfree_skb(skb);
--	return NETDEV_TX_BUSY;
-+	return;
- }
- 
- static int ar5523_add_interface(struct ieee80211_hw *hw,
diff --git a/debian/patches/remove-dead-code.patch b/debian/patches/remove-dead-code.patch
deleted file mode 100644
index 743ade9..0000000
--- a/debian/patches/remove-dead-code.patch
+++ /dev/null
@@ -1,56 +0,0 @@
-ar5523: remove dead code.
-
-Changes-licensed-under: ISC
-Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-
---- a/drivers/net/wireless/ath/ar5523/ar5523.c
-+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
-@@ -506,14 +506,7 @@ static int ar5523_set_rates(struct ar552
- 
- 	memset(&rates, 0, sizeof(rates));
- 	rates.magic1 = cpu_to_be32(0x02);
--#if 0
--	rates.size   = cpu_to_be32(1 + sizeof(rates.rates));
--	rates.nrates = rs->rs_nrates;
--	memcpy(rates.rates, rs->rs_rates, rs->rs_nrates);
--#endif
--	
--//	ar5523_dbg(ar, "setting supported rates nrates=%d\n", rs->rs_nrates);
--	
-+
- 	return ar5523_cmd_write(ar, AR5523_CMD_SET_RATES,
- 				&rates, sizeof(rates), 0);
- }
-@@ -546,7 +539,6 @@ static void ar5523_data_rx_cb(struct urb
- 
- 	if (len < AR5523_MIN_RXBUFSZ) {
- 		ar5523_err(ar, "wrong xfer size (len=%d)\n", len);
--//		ifp->if_ierrors++;
- 		goto skip;
- 	}
- 
-@@ -559,7 +551,6 @@ static void ar5523_data_rx_cb(struct urb
- 	if (be32_to_cpu(desc->len) > ar->rxbufsz) {
- 		ar5523_err(ar, "bad descriptor (len=%d)\n",
- 			       be32_to_cpu(desc->len));
--//		ifp->if_ierrors++;
- 		goto skip;
- 	}
- 
-@@ -712,16 +703,6 @@ static int ar5523_start(struct ieee80211
- 	
- 	ar5523_dbg(ar, "command 07h return code: %x\n", be32_to_cpu(val));
- 
--#if 0
--	/* set default channel */
--	ic->ic_bss->ni_chan = ic->ic_ibss_chan;
--	error = ar5523_set_chan(ar, ic->ic_bss->ni_chan);
--	if (error) {
--		ar5523_err(ar, "could not set channel\n");
--		goto fail;
--	}
--#endif
--
- 	error = ar5523_wme_init(ar);
- 	if (error) {
- 		ar5523_err(ar, "could not setup WME parameters\n");
diff --git a/debian/patches/remove-unused-variables.patch b/debian/patches/remove-unused-variables.patch
deleted file mode 100644
index 98127e8..0000000
--- a/debian/patches/remove-unused-variables.patch
+++ /dev/null
@@ -1,17 +0,0 @@
-ar5523: remove unused variable
-
-struct ieee80211_tx_info *info isn't used anywhere in ar5523_tx().
-
-Changes-licensed-under: ISC
-Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-
---- a/drivers/net/wireless/ath/ar5523/ar5523.c
-+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
-@@ -823,7 +823,6 @@ static int ar5523_tx(struct ieee80211_hw
- 	struct ar5523 *ar = hw->priv;
- 	struct ar5523_tx_data *data;
- 	struct ar5523_tx_desc *desc;
--	struct ieee80211_tx_info *info = IEEE80211_SKB_CB(skb);
- 	struct urb *urb;
- 	int paylen = skb->len;
- 	int error = 0;
diff --git a/debian/patches/series b/debian/patches/series
deleted file mode 100644
index 7cb7c39..0000000
--- a/debian/patches/series
+++ /dev/null
@@ -1,14 +0,0 @@
-clarify-licensing.patch
-kcompat-2.6.25.patch
-kcompat-2.6.26.patch
-urb_status.patch
-add-Globalsun-AR5523.patch
-kcompat-2.6.32.patch
-add-Gigaset-108.patch
-remove-unused-variables.patch
-remove-dead-code.patch
-fix-comment-style.patch
-kcompat-2.6.34.patch
-add-support-for-Netgear-WPN111.patch
-kcompat-3.5.patch
-declare-firmware.patch
diff --git a/debian/patches/urb_status.patch b/debian/patches/urb_status.patch
deleted file mode 100644
index 409c279..0000000
--- a/debian/patches/urb_status.patch
+++ /dev/null
@@ -1,70 +0,0 @@
-Fix urb status handling.
-
-Changes-licensed-under: ISC
-Signed-off-by: Antonio Galea <ant9000@netwise.it>
-Signed-off-by: Riccardo Magliocchetti <riccardo.magliocchetti@gmail.com>
-Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
-
---- a/drivers/net/wireless/ath/ar5523/ar5523.c
-+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
-@@ -531,12 +531,19 @@ static void ar5523_data_rx_cb(struct urb
- 	int error;
- 
- 	/* sync/async unlink faults aren't errors */
--	if (urb->status) {
--		ar5523_dbg(ar, "non-zero write bulk status received: %d\n",
--			       urb->status);
-+	if (urb->status && (urb->status != -ENOENT &&
-+	    urb->status != -ECONNRESET && urb->status != -ESHUTDOWN)) {
-+		ar5523_dbg(ar,
-+			   "nonzero write bulk status received: %d\n",
-+			   urb->status);
- 		goto skip;
- 	}
- 
-+	if (urb->status) {
-+		/* do not try to resubmit urb */
-+		return;
-+	}
-+
- 	if (len < AR5523_MIN_RXBUFSZ) {
- 		ar5523_err(ar, "wrong xfer size (len=%d)\n", len);
- //		ifp->if_ierrors++;
-@@ -791,9 +798,11 @@ static void ar5523_data_tx_cb(struct urb
- 	ar5523_dbg(ar, "data tx urb completed\n");
- 
- 	/* sync/async unlink faults aren't errors */
--	if (urb->status) {
--		ar5523_dbg(ar, "non-zero write bulk status received: %d\n",
--			       urb->status);
-+	if (urb->status && (urb->status != -ENOENT &&
-+	    urb->status != -ECONNRESET && urb->status != -ESHUTDOWN)) {
-+		ar5523_dbg(ar,
-+			   "nonzero write bulk status received: %d\n",
-+			   urb->status);
- 		goto out;
- 	}
- 
-@@ -1077,12 +1086,19 @@ static void ar5523_cmd_rx_cb(struct urb
- 	int error;
- 
- 	/* sync/async unlink faults aren't errors */
--	if (urb->status) {
--		ar5523_dbg(ar, "non-zero write bulk status received: %d\n",
--			       urb->status);
-+	if (urb->status && (urb->status != -ENOENT &&
-+	    urb->status != -ECONNRESET && urb->status != -ESHUTDOWN)) {
-+		ar5523_dbg(ar,
-+			   "nonzero write bulk status received: %d\n",
-+			   urb->status);
- 		goto resubmit;
- 	}
- 
-+	if (urb->status) {
-+		/* do not try to resubmit urb */
-+		return;
-+	}
-+
- 	switch (be32_to_cpu(hdr->code) & 0xff) {
- 	default:
- 		/* reply to a read command */
diff --git a/debian/rules b/debian/rules
deleted file mode 100755
index ac07e69..0000000
--- a/debian/rules
+++ /dev/null
@@ -1,70 +0,0 @@
-#!/usr/bin/make -f
-
-include /usr/share/quilt/quilt.make
-
-psource:=ar5523-source
-sname:=ar5523
-PACKAGE=ar5523-modules
-
-build-arch: build
-build-indep: build
-build: patch
-
-install: DH_OPTIONS=
-install: build
-	dh_testdir
-	dh_testroot
-	dh_prep
-	dh_installdirs
-	dh_installdirs -p$(psource) usr/src/modules/$(sname)/debian
-	
-	# upstream
-	cp 	*.c \
-		*.h \
-		Makefile \
-	        	debian/$(psource)/usr/src/modules/$(sname)
-	
-	# debianisation
-	cp	debian/control.modules.in \
-			debian/$(psource)/usr/src/modules/$(sname)/debian/control
-	cp	debian/rules.modules \
-			debian/$(psource)/usr/src/modules/$(sname)/debian/rules
-	chmod +x debian/$(psource)/usr/src/modules/$(sname)/debian/rules
-	cp	debian/changelog \
-		debian/compat \
-		debian/control \
-		debian/control.modules.in \
-		debian/copyright \
-			debian/$(psource)/usr/src/modules/$(sname)/debian/
-	
-	cd debian/$(psource)/usr/src && \
-		tar -cjf $(sname).tar.bz2 modules && \
-		rm -rf modules
-	dh_install
-
-clean: unpatch
-	dh_testdir
-	$(MAKE) clean
-	dh_clean
-
-binary-indep: build install
-	dh_testdir -i
-	dh_testroot -i
-	dh_installchangelogs  -i
-	dh_installdocs -i
-	dh_installexamples -i
-	dh_link -i
-	dh_compress -i
-	dh_fixperms -i
-	dh_installdeb -i
-	dh_installdeb -i
-	dh_shlibdeps -i
-	dh_gencontrol -i
-	dh_md5sums -i
-	dh_builddeb -i
-
-binary-arch:
-
-binary: binary-indep
-
-.PHONY: build clean binary-indep binary-arch binary install
diff --git a/debian/rules.modules b/debian/rules.modules
deleted file mode 100644
index 8d41a2b..0000000
--- a/debian/rules.modules
+++ /dev/null
@@ -1,35 +0,0 @@
-#!/usr/bin/make -f
-
-# module-assistant stuff
-PACKAGE = ar5523-modules
-MA_DIR ?= /usr/share/modass
--include $(MA_DIR)/include/generic.make
--include $(MA_DIR)/include/common-rules.make
-
-kdist_clean: prep-deb-files
-	dh_clean
-	$(MAKE) clean
-
-kdist_config: prep-deb-files
-
-binary-modules: kdist_config
-	dh_testdir
-	dh_testroot
-	dh_prep
-	dh_installdirs lib/modules/$(KVERS)/misc
-	
-	# build module
-	$(MAKE) -C $(CURDIR) KSRC=$(KSRC)
-	#$(MAKE) -C $(CURDIR) KSRC=$(KSRC) C=1 CHECKFLAGS="-D__CHECK_ENDIAN__"
-	# install module
-	dh_install *.ko lib/modules/$(KVERS)/misc
-	
-	dh_installdocs
-	dh_installchangelogs
-	dh_compress
-	dh_fixperms
-	dh_installmodules
-	dh_installdeb
-	dh_gencontrol -- -v$(VERSION)
-	dh_md5sums
-	dh_builddeb --destdir=$(DEB_DESTDIR)
diff --git a/debian/source/format b/debian/source/format
deleted file mode 100644
index 89ae9db..0000000
--- a/debian/source/format
+++ /dev/null
@@ -1 +0,0 @@
-3.0 (native)
diff --git a/debian/source/local-options b/debian/source/local-options
deleted file mode 100644
index 9cdfca9..0000000
--- a/debian/source/local-options
+++ /dev/null
@@ -1,2 +0,0 @@
-unapply-patches
-abort-on-upstream-changes
diff --git a/debian/source/options b/debian/source/options
deleted file mode 100644
index 1017a30..0000000
--- a/debian/source/options
+++ /dev/null
@@ -1,2 +0,0 @@
-compression = "gzip"
-compression-level = 9
-- 
1.7.10.4

